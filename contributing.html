---
layout: markdown
title: Contributing
longContent: true
---

# Contributing

Great to see you on this page! It means you are interested in how {{ site.name }} is built or you are even considering
a contribution.

If you've got an idea or - even better - some *code* for a new high-quality check, we should talk about getting it on
board. In fact, you can put it on board yourself by creating a pull request for it (more below). The same is true for
all kinds of improvements, including improvements to the website.

## Current Status

{{ site.name }} is using the [Travis](https://travis-ci.org/checkstyle-addons/checkstyle-addons) Continuous Integration
system. Every push to *master* and every pull request are automatically built by Travis-CI. If the Travis status is
*passing*{:style="color:#468847;"}, then it was successfully built with different Checkstyle versions, and all unit
tests were successful.\\
Test coverage is measured by [Coveralls](https://coveralls.io/r/checkstyle-addons/checkstyle-addons). The badge below
shows the current coverage, which is recomputed upon every successful build. Also, the coverage is calculated for every
pull request, and reported on the pull request's discussion page.

<div id="travis-status" class="panel panel-success">
  <div class="panel-heading">
    <h3 id="travis-status-title" class="panel-title">Build Status</h3>
  </div>
  <div class="panel-body">
    <a href="https://travis-ci.org/checkstyle-addons/checkstyle-addons"><img
       src="https://travis-ci.org/checkstyle-addons/checkstyle-addons.svg?branch=master"
       alt="Build Status" height="20" /></a>
    <a href="https://coveralls.io/r/checkstyle-addons/checkstyle-addons?branch=master"><img
       src="https://coveralls.io/repos/checkstyle-addons/checkstyle-addons/badge.svg?branch=master"
       alt="Coverage Status" height="20" /></a><br/>
    <a href="https://www.openhub.net/p/checkstyle-addons" target="_blank"><img style="margin-top: 15px;"
       src="https://www.openhub.net/p/checkstyle-addons/widgets/project_thin_badge?format=gif&ref=Thin+badge"
       alt="OpenHub Stats" height="20" /></a>
  </div>
</div>


## Collaboration Model

{{ site.name }} follows a *Fork &amp; Pull* collaboration model, which means that all changes go through
[pull requests](https://help.github.com/articles/using-pull-requests/).\\
Please feel free to suggest anything that's good. If you are going to expend a lot of work, it may make sense to
[open an issue](https://help.github.com/articles/creating-an-issue/) about it first, so we can discuss your plans.


<a name="setup" class="csa-offset-anchor"/>

## Building from Source

In order to build {{ site.name }} yourself, follow these steps:

 1. Make sure you have the prerequisites set up:
   - [Git](https://git-scm.com/){:target="_blank"}
   - [Java 8 SDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html){:target="_blank"},
     which must be used to run the build process
   - [Java 7 SDK](http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase7-521261.html){:target="_blank"}

    In order to do a full build of {{ site.name }}, we actually need both JDKs at the same time. It's no problem
    to have them all installed as long as each has its own distinct directory. The build process itself *must* run on
    Java&nbsp;8. It is basically possible to not install the Java&nbsp;7 SDK, but then the build will
    not create artifacts compatible with Java&nbsp;7.

 1. Make sure that your environment variable `JAVA_HOME` points to the Java&nbsp;8 SDK, for example
    `C:\PROGRA~1\Java\jdk1.8.0_131` (Windows).
 1. `%JAVA_HOME%\bin` (Windows) or `$JAVA_HOME/bin` (Linux/Unix) should be first on the `PATH`
 1. If you don't have a Gradle User Home yet, set it up by creating an empty directory called `.gradle` somewhere,
    for example `d:\.gradle` (Windows) or `~/.gradle` (Unix). Create an environment variable `GRADLE_USER_HOME` which
    points to this directory. This directory may grow quite large over time, because Gradle uses it to cache all
    downloaded stuff. Mine is 4&nbsp;GB. All Gradle processes, including your IDE, should see this environment variable.
 1. Create an empty text file in `GRADLE_USER_HOME` called `gradle.properties`. Inside, add the following lines:

        org.gradle.daemon=true
        org.gradle.jvmargs=-Xmx1536m -XX:MaxPermSize=384m
        checkstyleaddons_jdk7_java=C:/PROGRA~1/Java/jdk1.7.0_80/bin/java.exe
        checkstyleaddons_jdk7_javac=C:/PROGRA~1/Java/jdk1.7.0_80/bin/javac.exe
        checkstyleaddons_jdk7_javadoc=C:/PROGRA~1/Java/jdk1.7.0_80/bin/javadoc.exe

    The first two lines are optional and may be left out if the build works for you. The other lines
    basically configure where the executables from the lower version JDKs are at. This is used to build
    artifacts compatible with previous versions of Java. If these properties are missing, those artifacts
    will not be created. Adjust the paths depending on where you installed your Java&nbsp;7 SDKs). The paths
    should not contain spaces (may still work, but not tested).
 1. Clone the {{ site.name }} repo by running on the command line:\\
    `git clone https://github.com/{{ site.github }}.git`
 1. `cd checkstyle-addons`
 1. `gradlew build`\\
    This will take care of everything needed for a successful build of {{ site.name }}, including download and
    installation of Gradle.
 1. Find the fresh artifacts in build/libs. Done!


<a name="dev-intellij" class="csa-offset-anchor"/>

## IntelliJ IDEA Configuration

In case you want to use IntelliJ IDEA as your IDE to develop {{ site.name }}, you need to make sure that these
settings are configured correctly:

- When importing the Gradle project, be sure to activate the option "Create separate module per source set".
  The code will not compile if you forget to do that.
- Before running the unit tests from IntelliJ, make sure that the option
  "Add runtime assertions for not-null annotated methods and parameters" is turned *off* in the compiler settings.
  The tests will not run successfully if you forget to do that.


<a name="local-jekyll" class="csa-offset-anchor"/>

## Running the Website Locally

Running the website locally is important in order to be able to test changes before they go online. The {{ site.name }}
website is based on [Jekyll](https://jekyllrb.com//){:target="_blank"}, GitHub's lightweight but powerful CMS. The
website theme is Thomas Park's [SpaceLab theme](https://bootswatch.com/spacelab/){:target="_blank"}, which is based on
[Bootstrap](https://getbootstrap.com/docs/3.3/css/){:target="_blank"}. Markdown is GitHub-flavored markdown
([GFM](https://guides.github.com/features/mastering-markdown/#GitHub-flavored-markdown){:target="_blank"}), processed
by [kramdown](https://kramdown.gettalong.org/){:target="_blank"} (the GitHub pages standard). Syntax highlighting by
[Rouge](http://rouge.jneen.net/){:target="_blank"} (again, the GitHub standard). It is technically possible to use
[Jemoji](https://help.github.com/articles/emoji-on-github-pages/){:target="_blank"} in the bodies of pages and posts.
:+1:

 1. Check the prerequisites:
   - [Git](https://git-scm.com/){:target="_blank"}
   - Ruby 2.2.4 or higher ([Windows Installer](https://rubyinstaller.org/downloads/){:target="_blank"},
     [Unix/Linux](https://www.ruby-lang.org/en/documentation/installation/){:target="_blank"}), needed because Jekyll
	 is a Ruby Gem. Choose the 64bit or the 32bit version depending on your operating system.
   - Ruby DevKit, available from where you got Ruby itself
     ([installation instructions](https://jekyll-windows.juthilo.com/1-ruby-and-devkit/#install-the-ruby-devkit))
   - Make sure Ruby is on the PATH.
 1. Install Jekyll for [Linux/Unix](https://jekyllrb.com/docs/installation/){:target="_blank"} or
    [Windows](https://jekyll-windows.juthilo.com/){:target="_blank"}. This is normally performed by typing
	`gem install jekyll`, and may take a minute or two because lots of stuff is downloaded from the internet.
 1. Install Rouge highlighter by typing `gem install rouge` on the command line. Rouge is the highlighter required by
    GitHub at this time.
 1. Install wdm for auto-regeneration (`gem install wdm`) and Jemojis (`gem install jemoji`)
 1. Clone the {{ site.name }} repo: `git clone https://github.com/{{ site.github }}.git`
 1. `cd checkstyle-addons`
 1. `git checkout gh-pages`
 1. `jekyll serve --watch --incremental`

Now you can browse the website at *http://localhost:4000*


<a name="resources" class="csa-offset-anchor"/>

## Resources

A quick list of development resources:

  - [Sources](https://github.com/{{ site.github }}) on GitHub
  - [Javadoc]({{ site.baseurl }}/latest/apidocs/) (current version)
    Javadoc for previous versions may be found in the [release history]({{ site.baseurl }}/releases.html).
  - [Change log](https://github.com/{{ site.github }}/commits/master)
  - This website is also hosted on GitHub: [website sources](https://github.com/{{ site.github }}/tree/gh-pages)


<a name="criteria" class="csa-offset-anchor"/>

## Quality Matters

While {{ site.name }} tries to be as open as possible for new ideas and new code, it is also focused on quality. Thus,
there are a small number of criteria that new code must meet:

  - Travis must report green, which basically means that `gradlew clean build site` runs without errors.
  - No Checkstyle or FindBugs violations
  - Full unit test coverage
  - Meaningful documentation
  
People rely on {{ site.name }} to work as documented, so it is most important to minimize bugs and have good
documentation. The idea is to provide a stable and correct tool, so fixing known bugs if and when they arise has the
highest priority (more than new features).
